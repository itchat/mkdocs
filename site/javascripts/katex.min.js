document$.subscribe(({body})=>{const mathElements=body.querySelectorAll('script[type="math/tex"], .arithmatex, [data-math]');const hasInlineMath=body.textContent.includes('$')||body.textContent.includes('\\(');const hasDisplayMath=body.textContent.includes('$$')||body.textContent.includes('\\[');if(mathElements.length>0||hasInlineMath||hasDisplayMath){if(window.requestIdleCallback){requestIdleCallback(()=>{renderMathInElement(body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"$",right:"$",display:false},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true}],throwOnError:false,strict:false});});}else{setTimeout(()=>{renderMathInElement(body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"$",right:"$",display:false},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true}],throwOnError:false,strict:false});},100);}}})